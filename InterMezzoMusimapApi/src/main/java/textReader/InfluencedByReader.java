package textReader;

import DNA.Chunk;
import DNA.InfluencingChunk;

public class InfluencedByReader extends AbstractReader {

	//String str = "Array ( [total] => 28 [limit] => 3 [offset] => 0 [results] => Array ( [0] => Array ( [uid] => 54E03315-56C7-5E53-52CE-9626F9BF6AFF [nickname] => Placebo [realname] => Brian Molko, Stefan Olsdal & Robert Schultzberg [gender] => band [website] => http://www.placeboworld.co.uk [date_of_birth] => 00/00/1994 [place_of_birth] => London [date_of_death] => [place_of_death] => [references] => Array ( [0] => Array ( [source] => Facebook [values] => Array ( [0] => officialplacebo [1] => 55339791254 ) ) [1] => Array ( [source] => iTunes [values] => Array ( [0] => 649817 ) ) [2] => Array ( [source] => BandPageTour [values] => Array ( [0] => 12333904078049280 ) ) [3] => Array ( [source] => BandPage [values] => Array ( [0] => 12333904078049280 ) ) [4] => Array ( [source] => Last.FM [values] => Array ( [0] => https://www.last.fm/fr/music/Placebo ) ) [5] => Array ( [source] => Spotify [values] => Array ( [0] => 43stuLIinn8c0meBNQ9A82 [1] => 6RZUqkomCmb8zCRqc9eznB ) ) [6] => Array ( [source] => Twitter [values] => Array ( [0] => https://twitter.com/placeboworld [1] => placeboworld ) ) [7] => Array ( [source] => Youtube [values] => Array ( [0] => https://www.youtube.com/user/officialplacebo ) ) [8] => Array ( [source] => Qobuz [values] => Array ( [0] => 2415195 [1] => 2314695 [2] => 43837 ) ) [9] => Array ( [source] => AllMusic [values] => Array ( [0] => mn0000355412 ) ) [10] => Array ( [source] => Wikipedia [values] => Array ( [0] => https://en.wikipedia.org/wiki/Placebo_(band) ) ) [11] => Array ( [source] => Deezer [values] => Array ( [0] => 8 ) ) [12] => Array ( [source] => 7Digital [values] => Array ( [0] => 23 ) ) [13] => Array ( [source] => Discogs [values] => Array ( [0] => 9436 ) ) [14] => Array ( [source] => MusicBrainz [values] => Array ( [0] => 847e8284-8582-4b0e-9c26-b042a4f49e57 ) ) [15] => Array ( [source] => MusicStory [values] => Array ( [0] => http://www.music-story.com/placebo ) ) [16] => Array ( [source] => Echonest [values] => Array ( [0] => AR6892W1187B9AC71B ) ) ) [score] => 100 ) [1] => Array ( [uid] => E4E8168E-79E7-7503-C95B-D5C98155EA01 [nickname] => Colin Blunstone [realname] => Colin Edward Michael Blunstone [gender] => male [website] => http://www.colinblunstone.co.uk/ [date_of_birth] => [place_of_birth] => England [date_of_death] => [place_of_death] => [references] => Array ( [0] => Array ( [source] => Spotify [values] => Array ( [0] => 27DCwiPx5ocQsf4K43SlIL ) ) [1] => Array ( [source] => Qobuz [values] => Array ( [0] => 71536 ) ) [2] => Array ( [source] => AllMusic [values] => Array ( [0] => mn0000776562 ) ) [3] => Array ( [source] => Deezer [values] => Array ( [0] => 9860 ) ) [4] => Array ( [source] => Discogs [values] => Array ( [0] => 205031 ) ) [5] => Array ( [source] => Echonest [values] => Array ( [0] => ARB7BE11187B9B64E9 ) ) [6] => Array ( [source] => MusicStory [values] => Array ( [0] => http://www.music-story.com/colin-blunstone ) ) ) [score] => 84.21 ) [2] => Array ( [uid] => 774A36BC-A991-8A18-3838-2F54E5D2328E [nickname] => Rune Riley Kölsch [realname] => Rune RK (Rune Reilly Kølsch) [gender] => male [website] => [date_of_birth] => 00/00/1977 [place_of_birth] => Denmark [date_of_death] => [place_of_death] => [references] => Array ( [0] => Array ( [source] => Discogs [values] => Array ( [0] => 930250 [1] => 147124 [2] => 180238 [3] => 180238 [4] => 180238 [5] => 539297 [6] => 688469 [7] => 129676 [8] => 3322 [9] => 1989806 [10] => 1989806 [11] => 574584 ) ) [1] => Array ( [source] => Wikipedia [values] => Array ( [0] => https://en.wikipedia.org/wiki/Rune_RK [1] => https://en.wikipedia.org/wiki/Artificial_Funk ) ) [2] => Array ( [source] => Spotify [values] => Array ( [0] => 32ejcIBfk6cbs473H0LlBE [1] => 4fMvqvWEhtBFDRERY3GUdu [2] => 7AgK0aK3VZbtTlzWVE8WSX [3] => 2D9Oe8R9UhbMvFAsMJpXj0 ) ) [3] => Array ( [source] => 7Digital [values] => Array ( [0] => 282997 [1] => 98951 [2] => 2063898 [3] => 934082 ) ) [4] => Array ( [source] => MusicBrainz [values] => Array ( [0] => 50178991-f646-4538-9a53-5fc5086d7a92 [1] => f9fda8f8-0b61-40ef-b79e-4802264256e2 [2] => 556ee13f-1ef3-4cf0-a11e-1c71aff962d4 ) ) [5] => Array ( [source] => Facebook [values] => Array ( [0] => 187217811307777 [1] => 104640656291263 ) ) [6] => Array ( [source] => Echonest [values] => Array ( [0] => AR3DWZM1187B9AA65F [1] => ARHFLHY1187FB47FB9 [2] => ARZAYOL1272BA85D14 [3] => ARYKXKD122BCFCB13E [4] => ARHFLHY1187FB47FB9 [5] => AR9AHHW1187FB4F0B2 [6] => ARZIQGM133EFAF7BF6 [7] => ARZCYD91187FB4F0B1 [8] => ARXOJGV1187FB4F0AF [9] => ARIOCVV12BEF24FC87 [10] => ARJA29V1187FB56A1A [11] => ARJA29V1187FB56A1A ) ) [7] => Array ( [source] => AllMusic [values] => Array ( [0] => mn0000302025 [1] => mn0002563549 ) ) [8] => Array ( [source] => Qobuz [values] => Array ( [0] => 594532 [1] => 966339 [2] => 723986 [3] => 257204 [4] => 1552917 [5] => 1038453 [6] => 217075 [7] => 1101223 [8] => 1306327 ) ) [9] => Array ( [source] => Deezer [values] => Array ( [0] => 1371499 [1] => 251600 [2] => 11421 [3] => 251591 ) ) [10] => Array ( [source] => Twitter [values] => Array ( [0] => runerk ) ) [11] => Array ( [source] => iTunes [values] => Array ( [0] => 319272560 ) ) ) [score] => 47.37 ) ) )";

	@Override
	public Chunk[] readChunk(String strToRead) {
		Chunk[] toReturn = new Chunk[3];
		String influencing;
		if(strToRead.length() < 9) {
			influencing = this.getGeneric();
		}else {
			influencing = strToRead.substring(strToRead.lastIndexOf(" \\\"results\\\": ") + 1);
		}
		for(int i = 0; i < 3 ; i++) {
			influencing = influencing.substring(influencing.indexOf("\"uid\":\"")+ "\"uid\":\"".length());
			//removing everything from what we want to assign
			String UID = influencing.substring(0, influencing.indexOf("\",\""));
			influencing = influencing.substring(influencing.indexOf("\"nickname\":")+ 12);
			//creating new empty mood
			String influencingToAssign = influencing.substring(0, influencing.indexOf("\""));
			//removing the mood we used
			influencing = influencing.substring(influencing.indexOf("\"score\":") + 8);
			String influencingScore = influencing.substring(0, influencing.indexOf("}"));
			System.out.println(influencingToAssign);
			System.out.println(influencingScore);
			toReturn[i] = new InfluencingChunk(influencingToAssign,UID,  influencingScore);
		}
		
		return toReturn;
	}
	
	private String getGeneric() {
		return "{\"total\":5566253,\"limit\":10,\"offset\":0,\"results\":[{\"uid\":\"9912862D-97A4-119C-8E6E-B6E9D89459D8\",\"name\":\"Fefe Naa Efe\",\"duration\":492,\"bpm\":162,\"index\":\"1\\/2\",\"year\":\"06\\/1973\",\"best_of_jury\":false,\"live\":false,\"instrumental\":false,\"bonus\":false,\"hidden\":false,\"hit_parade\":false,\"unrecorded\":false,\"references\":[{\"source\":\"ISRC\",\"values\":[\"USME30902217\"]},{\"source\":\"EAN\",\"values\":[\"5051083068628\"]},{\"source\":\"Qobuz\",\"values\":[\"7608309\"]}],\"score\":100},{\"uid\":\"D61D6EEE-F340-791F-BBFD-A63847F69DCA\",\"name\":\"Le F\\u00e9f\\u00e9\",\"duration\":148,\"bpm\":101,\"index\":\"1\\/12\",\"year\":\"00\\/1850\",\"best_of_jury\":false,\"live\":false,\"instrumental\":false,\"bonus\":false,\"hidden\":false,\"hit_parade\":false,\"unrecorded\":false,\"references\":[{\"source\":\"ISRC\",\"values\":[\"FRUM70901681\"]},{\"source\":\"EAN\",\"values\":[\"0060075328604\",\"0060252747948\"]},{\"source\":\"Qobuz\",\"values\":[\"2195374\",\"2270415\"]}],\"score\":91.67},{\"uid\":\"8020448F-95C1-9A0B-7080-35E083D70F37\",\"name\":\"Fefe\",\"duration\":288,\"bpm\":172,\"index\":\"1\\/8\",\"year\":\"05\\/1995\",\"best_of_jury\":false,\"live\":false,\"instrumental\":false,\"bonus\":false,\"hidden\":false,\"hit_parade\":false,\"unrecorded\":false,\"references\":[{\"source\":\"Spotify\",\"values\":[\"4RhohxaRel291W7A6HOxsz\"]},{\"source\":\"ISRC\",\"values\":[\"ITC000851581\"]},{\"source\":\"EAN\",\"values\":[\"8024709081728\"]},{\"source\":\"Qobuz\",\"values\":[\"18668829\"]}],\"score\":91.67},{\"uid\":\"E155A151-94C5-AF8E-DF7D-5202E429D640\",\"name\":\"eFeFeF\",\"duration\":484,\"bpm\":131,\"index\":\"1\\/5\",\"year\":\"11\\/1999\",\"best_of_jury\":false,\"live\":false,\"instrumental\":false,\"bonus\":false,\"hidden\":false,\"hit_parade\":false,\"unrecorded\":false,\"references\":[{\"source\":\"ISRC\",\"values\":[\"USB8U1043475\"]},{\"source\":\"EAN\",\"values\":[\"0776994000202\"]},{\"source\":\"Qobuz\",\"values\":[\"6668309\"]},{\"source\":\"Spotify\",\"values\":[\"4mnq7peogiwRus1Fgzql75\"]}],\"score\":91.67},{\"uid\":\"77C8BA93-48F3-C5C1-DD4B-46269CB9C803\",\"name\":\"Fefe\",\"duration\":168,\"bpm\":141,\"index\":\"1\\/1\",\"year\":\"00\\/1850\",\"best_of_jury\":false,\"live\":false,\"instrumental\":false,\"bonus\":false,\"hidden\":false,\"hit_parade\":false,\"unrecorded\":false,\"references\":[{\"source\":\"ISRC\",\"values\":[\"FR6V81137629\",\"FR6V81137637\"]},{\"source\":\"EAN\",\"values\":[\"3369195051226\"]},{\"source\":\"Qobuz\",\"values\":[\"14337751\",\"14337759\"]}],\"score\":91.67},{\"uid\":\"5C8D770D-E3B4-5C33-3FA5-18C0576F2919\",\"name\":\"Hu100bar\",\"duration\":257,\"bpm\":162,\"index\":\"2\\/B3\",\"year\":\"08\\/1996\",\"best_of_jury\":false,\"live\":false,\"instrumental\":false,\"bonus\":false,\"hidden\":false,\"hit_parade\":false,\"unrecorded\":false,\"references\":[{\"source\":\"ISRC\",\"values\":[\"CZJ701300275\"]},{\"source\":\"EAN\",\"values\":[\"8590233001599\"]},{\"source\":\"Qobuz\",\"values\":[\"23750815\"]},{\"source\":\"Spotify\",\"values\":[\"7jAKDbKMT3RkB9qsQgx9YU\"]}],\"score\":83.33},{\"uid\":\"EDB4CE0B-F4F1-B9C4-98E5-1490EFEBAE01\",\"name\":\"325\",\"duration\":209,\"bpm\":131,\"index\":\"1\\/A3\",\"year\":\"00\\/1995\",\"best_of_jury\":false,\"live\":false,\"instrumental\":false,\"bonus\":false,\"hidden\":false,\"hit_parade\":false,\"unrecorded\":false,\"references\":[{\"source\":\"Spotify\",\"values\":[\"4GFEeARSuoVZE9JExal9SS\"]},{\"source\":\"ISRC\",\"values\":[\"GBEHB0400031\"]},{\"source\":\"EAN\",\"values\":[\"5051083054560\"]},{\"source\":\"Qobuz\",\"values\":[\"3114329\"]}],\"score\":83.33},{\"uid\":\"090B4F54-CB84-B13B-2465-61AEB4A49124\",\"name\":\"256\",\"duration\":83,\"bpm\":182,\"index\":\"1\\/6\",\"year\":\"04\\/2008\",\"best_of_jury\":false,\"live\":false,\"instrumental\":false,\"bonus\":false,\"hidden\":false,\"hit_parade\":false,\"unrecorded\":false,\"references\":[{\"source\":\"Spotify\",\"values\":[\"2AKbPDvap0BjEdBrt85gCh\"]},{\"source\":\"ISRC\",\"values\":[\"DEKF70809206\"]},{\"source\":\"EAN\",\"values\":[\"3700398702223\"]},{\"source\":\"Qobuz\",\"values\":[\"1581699\"]}],\"score\":83.33},{\"uid\":\"3B852332-D29C-F3CD-F7C3-7401E0C4FF2F\",\"name\":\"Bf\",\"duration\":243,\"bpm\":172,\"index\":\"1\\/3\",\"year\":\"00\\/1850\",\"best_of_jury\":false,\"live\":false,\"instrumental\":false,\"bonus\":false,\"hidden\":false,\"hit_parade\":false,\"unrecorded\":false,\"references\":[{\"source\":\"ISRC\",\"values\":[\"ATU351101098\"]},{\"source\":\"EAN\",\"values\":[\"9009297001654\"]},{\"source\":\"Qobuz\",\"values\":[\"20239683\"]}],\"score\":83.33},{\"uid\":\"77DA61AD-A9A3-E6D8-F7A7-9FCF50254AAE\",\"name\":\"100Ba Xian (%)Ai Shang Ni\",\"duration\":284,\"bpm\":91,\"index\":\"1\\/4\",\"year\":\"00\\/1850\",\"best_of_jury\":false,\"live\":false,\"instrumental\":false,\"bonus\":false,\"hidden\":false,\"hit_parade\":false,\"unrecorded\":false,\"references\":[{\"source\":\"Qobuz\",\"values\":[\"21285379\"]},{\"source\":\"EAN\",\"values\":[\"0825646225842\"]},{\"source\":\"ISRC\",\"values\":[\"HKE050800008\"]}],\"score\":83.33}]}\r\n";
	}

}
